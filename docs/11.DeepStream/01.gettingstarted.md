# DeepStream

## JetsonにHMDIケーブルをつなげログイン

Terminalでxhost +を実行
```
xhost +
```

## JetsonにSSHでログイン

Displayの設定をおこなう(Jetson Nano 2GB)
```
export DISPLAY=:0
xhost
```

下記のメッセージが戻ってくれば、X-Windowへの画面転送ができる状態になっている。
```
access control disabled, clients can connect from any host
LOCAL:
SI:localuser:jetbot
```

## Dockerの起動

```
sudo docker run -it --rm --ipc=host --net=host --runtime nvidia  --device /dev/video0:/dev/video0:mwr  -e "DISPLAY" -w /opt/nvidia/deepstream/deepstream-5.0 -v /tmp/argus_socket:/tmp/argus_socket -v \/tmp/.X11-unix/:/tmp/.X11-unix nvcr.io/nvidia/deepstream-l4t:5.0.1-20.09-samples
```

## DeepStreamをPythonで使用するためのパッケージをインストール

```
apt update
apt install libgstrtspserver-1.0-dev v4l-utils  vim python3-pip python3-gi python3-dev python3-gst-1.0 -y
```

## DeepStream Python appsをClone

```
cd /opt/nvidia/deepstream/deepstream-5.0/sources
git clone https://github.com/NVIDIA-AI-IOT/deepstream_python_apps
cd deepstream_python_apps
```

サンプルを実行

```
cd /opt/nvidia/deepstream/deepstream-5.0/sources/deepstream_python_apps/apps/deepstream-test3
python3 deepstream_test_3.py file:///opt/nvidia/deepstream/deepstream-5.0/samples/streams/sample_1080p_h264.mp4
```


